<% id_modal = "fr-modal-fusionner" %>

<%= dsfr_modal(
  title: t(".titre").html_safe,
  html_attributes: { id: id_modal }
) do |component| %>
  <div class="modal-fusionner">
    <%= form_with url: batch_action_admin_beneficiaires_path, method: :post, local: true, id: "fusion-form" do |f| %>
      <div class= "liste-beneficiaires-fusion">
        <p> <%= t(".instruction") %> </p>
        <ul id="liste-elements-a-fusionner"></ul>
        <p> <%= t(".pour_fusion") %> <span class="fr-text--bold" id="beneficiaire-rattache"></span>. </p>
        <%= dsfr_alert(type: :warning, html_attributes: { class: "alert-incomplete" }) do %>
          <%= t(".alert_fusion", nom: content_tag(:span, "", class: "fr-text--bold", id: "beneficiaire-rattache-alert")).html_safe %>
        <% end %>
        
      </div>

      <%= hidden_field_tag :batch_action, "fusionner" %>
      <%= hidden_field_tag :batch_action_inputs, "{}" %>

      <div id="hidden-ids-container"></div>

    <% end %>
  </div>

  <% component.with_button do %>
    <%= render BoutonComponent.new(
      "#",
      type: :primary,
      tag: :submit,
      size: :md,
      id: "confirmer-fusion",
      data: { disable_with: false } 
    ) do %>
      <%= t(".confirmer") %>
    <% end %>
  <% end %>
  <% component.with_button do %>
    <%= render BoutonComponent.new(
      "#",
      type: :secondary,
      tag: :button,
      size: :md,
      "aria-controls": id_modal
    ) do %>
      <%= t(".annuler") %>
    <% end %>
  <% end %>
<% end %>
