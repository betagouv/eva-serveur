# frozen_string_literal: true

div class: 'evaluations bloc-apercu' do
  div class: 'bloc-apercu-wrapper' do
    div class: 'bloc-apercu-header' do
      h3 t('.titre')
      text_node link_to t('.voir_tout'), admin_evaluations_path
    end

    div class: 'evaluation-legende' do
      render partial: 'admin/evaluations/pastille_illettrisme_potentiel', locals: {
        etiquette: t('.legende_info')
      }
    end
  end

  div class: 'evaluations-liste' do
    evaluations.each do |evaluation|
      div class: 'evaluation' do
        span class: 'nom' do
          text_node nom_pour_ressource(evaluation)
        end
        span class: 'pastille' do
          if evaluation.illettrisme_potentiel?
            render partial: 'admin/evaluations/pastille_illettrisme_potentiel',
                   locals: { avec_tooltip: true }
          end
        end
        span class: 'date' do
          text_node t('.date', date: time_ago_in_words(evaluation.created_at))
        end
        span class: 'action' do
          link_to t('.action'), admin_evaluation_path(evaluation)
        end
      end
    end
  end
end
