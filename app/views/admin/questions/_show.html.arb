# frozen_string_literal: true

panel 'Détails de la question' do
  attributes_table_for question do
    row :id
    row :libelle
    row :nom_technique
    row t('.label_type'), &:type
    row :intitule
    row 'Audio Intitulé' do
      intitule_transcription = question.transcriptions.find_by(categorie: :intitule)
      if intitule_transcription&.audio&.attached?
        audio_tag(url_for(intitule_transcription.audio), controls: true)
      end
    end
    row :modalite_reponse
    row 'Audio Modalite Réponse' do
      modalite_reponse_transcription = question.transcriptions.find_by(categorie: :modalite_reponse)
      if modalite_reponse_transcription&.audio&.attached?
        audio_tag(url_for(modalite_reponse_transcription.audio), controls: true)
      end
    end
    row :created_at
  end
end

unless question.choix.blank?
  panel 'Choix' do
    reorderable_table_for question.choix do
      column :intitule
      column :type_choix
      column :audio do |transcription|
        if transcription.audio.attached?
          audio_tag(url_for(transcription.audio), controls: true)
        end
      end
    end
  end
end
