<% complet = evaluation_impact_general.present? %>

<div id="evaluation-impact-general" class="fr-mb-6w">
  <h2 class="evaluation__titre"><%= t(".titre") %></h2>

  <div class="panel">
    <div class="fr-pl-4w fr-pr-4w evaluation-impact-general__resultats">
      <% if complet %>
        <% interpretations = [
          :performance_collective,
          :agilite_organisationnelle,
          :securite_qualite,
          :mobilite_professionnelle
        ] %>
        <% interpretations.each do |interpretation| %>
          <% resultat = evaluation_impact_general.synthese[interpretation] %>

          <%= render Evaluation::MesureImpactCalloutComponent.new(
            titre: t(".#{interpretation}.callout.titre.#{resultat}"),
            resultat: resultat
          ) %>
        <% end %>

        <% interpretations = [
          :score_cout,
          :score_strategie,
          :score_numerique
        ] %>
        <% interpretations.each do |interpretation| %>
          <% resultat = evaluation_impact_general.synthese[interpretation] %>

          <%= render Evaluation::MesureImpactCalloutComponent.new(
            titre: t(".#{interpretation}.callout.titre.#{resultat}"),
            resultat: resultat
          ) %>
        <% end %>
      <% else %>
        <p><%= t(".incomplet.description") %></p>

        <% url = "#{URL_EVA_ENTREPRISES}/evaluation-impact?evaluation_id=#{params[:id]}" %>
        <%= render BoutonComponent.new(url, type: :primary) do %>
          <%= t(".incomplet.action") %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
