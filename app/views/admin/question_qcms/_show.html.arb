# frozen_string_literal: true

panel 'DÃ©tails de la question' do
  attributes_table_for question_qcm do
    row :id
    row :libelle
    row :categorie
    row :nom_technique
    row :description
    row :intitule do
      intitule_transcription = question_qcm.transcriptions.find_by(categorie: :intitule)
      div intitule_transcription.ecrit if intitule_transcription.ecrit
    end
    row :metacompetence
    row :type_qcm
    row :modalite_reponse
    row :created_at
  end
end

panel 'Choix' do
  reorderable_table_for question_qcm.choix do
      column :intitule
      column :type_choix
      column :audio do |transcription|
        if transcription.audio.attached?
          audio_tag(url_for(transcription.audio), controls: true)
        else
          div "Pas d'audio"
        end
      end
    end
end

panel 'Transcriptions audios' do
  table_for question_qcm.transcriptions do
    column :ecrit
    column :categorie
    column :audio do |transcription|
      if transcription.audio.attached?
        audio_tag(url_for(transcription.audio), controls: true)
      else
        div "Pas d'audio"
      end
    end
  end
end
