<%= form_with id: :recherche_responsable_suivi, method: :patch do |f| %>
  <%= f.search_field :nom_responsable_suivi, placeholder: t('.placeholder'), class: 'champ-recherche' %>
  <%= f.hidden_field :evaluation_responsable_suivi_id, name: 'evaluation[responsable_suivi_id]'  %>
<% end %>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const comptes = [<% responsables_suivi_possibles.each do |compte| %>
      { value: "<%= compte.display_name %>", id: "<%= compte.id %>" },
    <% end %>];
  $("#nom_responsable_suivi" ).autocomplete({
    source: function (request, response) {
      const term = request.term.toLowerCase();
      response(comptes.filter(compte => compte.value.toLowerCase().includes(term)));
    },
    response: ajouteReponseAucunResultat,
    select: function( event, ui ) {
      $('#evaluation_responsable_suivi_id').val(ui.item.id);
      $('#recherche_responsable_suivi').submit();
    },
    autoFocus: false,
    minLength: 0,
  });
});
</script>
