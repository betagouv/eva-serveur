active_admin_form_for [ :admin, resource ] do |f|
  f.semantic_errors
  f.inputs do
    render partial: "admin/questions/base_form", locals: { f: f }
    f.input :description
    render partial: "admin/questions/input_checkbox_avec_hint", locals: {
      f: f,
      attribute: :passable,
      hint: t("questions.passable_hint")
    }
    render partial: "admin/questions/input_illustration", locals: { f: f }
    render partial: "admin/questions/input_illustration_base",
           locals: {
             f: f,
             nom: :zone_depot,
             nom_suppression: :supprimer_zone_depot,
             image: resource.zone_depot,
             hint: ".format_fichier_zone_depot",
             content_type: :svg
           }
    f.input :orientation, as: :select,
                          collection: QuestionGlisserDeposer::ORIENTATION_CHOIX,
                          include_blank: true
  end

  render partial: "admin/questions/inputs_avec_transcriptions_audios",
         locals: { f: f }
  f.has_many :reponses, allow_destroy: true, new_record: t(".ajout_reponse"),
                        heading: t(".reponses") do |r|
    r.input :id, as: :hidden
    r.input :nom_technique
    r.input :intitule
    r.input :position_client
    r.input :type_choix, as: :hidden, input_html: { value: :bon }
    label = r.object.illustration.attached? ? t(".label_illustration") : true
    r.input :illustration, as: :image_file,
                           label: label,
                           input_html: { accept: illustration_content_types.join(",") },
                           hint: t(".hint")
  end
  f.actions do
    f.action :submit
    annulation_formulaire(f)
  end
end
