# frozen_string_literal: true

panel 'DÃ©tails de la question' do
  attributes_table_for question do
    row :id
    row :libelle
    row :nom_technique
    row t('.label_type'), &:type
    intitule_transcription = question.transcriptions.find_by(categorie: :intitule)
    row :intitule do
      div intitule_transcription.ecrit if intitule_transcription.ecrit
    end
    row :audio_intitule do
      if intitule_transcription&.audio&.attached?
        audio_tag(url_for(intitule_transcription.audio), controls: true)
      end
    end
    row :modalite_reponse
    row :audio_consigne do
      modalite_reponse_transcription = question.transcriptions.find_by(categorie: :modalite_reponse)
      if modalite_reponse_transcription&.audio&.attached?
        audio_tag(url_for(modalite_reponse_transcription.audio), controls: true)
      end
    end
    row :created_at
  end
end

unless question.choix.blank?
  panel 'Choix' do
    reorderable_table_for question.choix do
      column :intitule
      column :type_choix
      column :audio do |transcription|
        if transcription.audio.attached?
          audio_tag(url_for(transcription.audio), controls: true)
        end
      end
    end
  end
end
